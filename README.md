# st_book - SillyTavern ä¸–ç•Œä¹¦å’Œè§’è‰²å¡è‡ªåŠ¨ç”Ÿæˆå·¥å…·\n\nåŸºäºAIæ™ºèƒ½åˆ†æå°è¯´æ–‡æœ¬ï¼Œè‡ªåŠ¨ç”Ÿæˆé«˜è´¨é‡çš„è§’è‰²å¡å’Œä¸–ç•Œä¹¦ï¼Œæ”¯æŒç»Ÿä¸€é…ç½®ç®¡ç†å’Œå®Œæ•´çš„å·¥ä½œæµç¨‹ã€‚\n\n## ğŸŒŸ ä¸»è¦ç‰¹æ€§\n\n- **æ™ºèƒ½è§’è‰²æå–**ï¼šä½¿ç”¨AIåˆ†æå°è¯´æ–‡æœ¬ï¼Œè‡ªåŠ¨è¯†åˆ«å’Œæå–è§’è‰²ä¿¡æ¯\n- **è§’è‰²æ™ºèƒ½åˆå¹¶**ï¼šè‡ªåŠ¨è¯†åˆ«é‡å¤è§’è‰²å¹¶è¿›è¡Œæ™ºèƒ½åˆå¹¶ï¼Œé¿å…å†—ä½™\n- **è§’è‰²è´¨é‡ç­›é€‰**ï¼šæŒ‰å†…å®¹ä¸°å¯Œåº¦è‡ªåŠ¨ç­›é€‰æœ€é‡è¦çš„è§’è‰²\n- **ä¸–ç•Œä¹¦ç”Ÿæˆ**ï¼šè‡ªåŠ¨æå–ä¸–ç•Œè§‚è®¾å®šï¼Œç”Ÿæˆç»“æ„åŒ–ä¸–ç•Œä¹¦\n- **ç»Ÿä¸€é…ç½®ç®¡ç†**ï¼šæ‰€æœ‰å‚æ•°å¯é€šè¿‡é…ç½®æ–‡ä»¶ç»Ÿä¸€ç®¡ç†\n- **å®Œæ•´å·¥ä½œæµ**ï¼šä»å°è¯´æ–‡æœ¬åˆ°SillyTavernå¯ç”¨èµ„æºçš„ä¸€é”®ç”Ÿæˆ\n\n## ğŸš€ å¿«é€Ÿå¼€å§‹\n\n### 1. ç¯å¢ƒå‡†å¤‡\n\n```bash\n# å…‹éš†é¡¹ç›®\ngit clone https://github.com/nariahlamb/st_book.git\ncd st_book\n\n# å®‰è£…ä¾èµ–\npip install -r requirements.txt\n```\n\n### 2. é…ç½®è®¾ç½®\n\nå¤åˆ¶é…ç½®æ¨¡æ¿å¹¶å¡«å…¥æ‚¨çš„APIä¿¡æ¯ï¼š\n\n```bash\ncp config_template.yaml config.yaml\n```\n\nç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„APIé…ç½®ï¼š\n\n```yaml\napi:\n  api_key: \"YOUR_API_KEY_HERE\"  # æ‚¨çš„APIå¯†é’¥\n  api_base: \"https://api.openai.com/v1\"  # APIåŸºç¡€URL\n```\n\n### 3. å‡†å¤‡å°è¯´æ–‡ä»¶\n\nå°†æ‚¨çš„å°è¯´æ–‡æœ¬æ–‡ä»¶å‘½åä¸º `a.txt` å¹¶æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼Œæˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ `input.source_file` è·¯å¾„ã€‚\n\n### 4. ä¸€é”®ç”Ÿæˆ\n\n#### ç”Ÿæˆè§’è‰²å¡ï¼š\n```bash\npython character_workflow.py auto\n```\n\n#### ç”Ÿæˆä¸–ç•Œä¹¦ï¼š\n```bash\npython character_workflow.py wb-auto\n```\n\n## ğŸ“ é¡¹ç›®ç»“æ„\n\n```\nst_book/\nâ”œâ”€â”€ character_workflow.py      # ä¸»å·¥ä½œæµè„šæœ¬\nâ”œâ”€â”€ config_template.yaml       # é…ç½®æ–‡ä»¶æ¨¡æ¿\nâ”œâ”€â”€ project_config.py          # é…ç½®ç®¡ç†å™¨\nâ”œâ”€â”€ character_extractor_llm.py # è§’è‰²æå–æ¨¡å—\nâ”œâ”€â”€ character_merger.py        # è§’è‰²åˆå¹¶æ¨¡å—\nâ”œâ”€â”€ character_filter.py        # è§’è‰²ç­›é€‰æ¨¡å—\nâ”œâ”€â”€ create_card.py             # è§’è‰²å¡ç”Ÿæˆæ¨¡å—\nâ”œâ”€â”€ worldbook_extractor.py     # ä¸–ç•Œä¹¦æå–æ¨¡å—\nâ”œâ”€â”€ worldbook_generator.py     # ä¸–ç•Œä¹¦ç”Ÿæˆæ¨¡å—\nâ”œâ”€â”€ text_splitter.py           # æ–‡æœ¬åˆ†å‰²æ¨¡å—\nâ”œâ”€â”€ code.py                    # æ ¼å¼è½¬æ¢æ¨¡å—\nâ””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜\n```\n\n## ğŸ”§ è¯¦ç»†ä½¿ç”¨\n\n### è§’è‰²å¡ç”Ÿæˆæµç¨‹\n\n```bash\n# å®Œæ•´è‡ªåŠ¨æµç¨‹ï¼ˆæ¨èï¼‰\npython character_workflow.py auto\n\n# åˆ†æ­¥æ‰§è¡Œ\npython character_workflow.py split      # åˆ†å‰²æ–‡æœ¬\npython character_workflow.py extract    # æå–è§’è‰²\npython character_workflow.py merge      # åˆå¹¶è§’è‰²\npython character_workflow.py filter     # ç­›é€‰è§’è‰²\npython character_workflow.py create     # ç”Ÿæˆè§’è‰²å¡\n```\n\n### ä¸–ç•Œä¹¦ç”Ÿæˆæµç¨‹\n\n```bash\n# å®Œæ•´è‡ªåŠ¨æµç¨‹ï¼ˆæ¨èï¼‰\npython character_workflow.py wb-auto\n\n# åˆ†æ­¥æ‰§è¡Œ\npython character_workflow.py wb-extract    # æå–ä¸–ç•Œä¹¦æ¡ç›®\npython character_workflow.py wb-generate   # ç”Ÿæˆç»“æ„åŒ–ä¸–ç•Œä¹¦\n```\n\n### é…ç½®éªŒè¯\n\n```bash\npython verify_config_usage.py  # éªŒè¯é…ç½®ä½¿ç”¨æƒ…å†µ\n```\n\n## âš™ï¸ é…ç½®è¯´æ˜\n\n### æ ¸å¿ƒé…ç½®é¡¹\n\n- **APIé…ç½®**ï¼š`api.api_key` å’Œ `api.api_base`\n- **æ¨¡å‹é…ç½®**ï¼š`models.extraction_model` å’Œ `models.generation_model`\n- **æ¸©åº¦å‚æ•°**ï¼š`models.extraction_temperature` å’Œ `models.generation_temperature`\n- **è§’è‰²ç­›é€‰**ï¼š`character_filter.keep_count` æ§åˆ¶ä¿ç•™çš„è§’è‰²æ•°é‡\n- **ç›¸ä¼¼åº¦é˜ˆå€¼**ï¼š`similarity.name_threshold` æ§åˆ¶è§’è‰²åˆå¹¶çš„ä¸¥æ ¼ç¨‹åº¦\n\n### è¾“å‡ºç›®å½•\n\n- `cards/` - ç”Ÿæˆçš„è§’è‰²å¡æ–‡ä»¶\n- `worldbook/` - ç”Ÿæˆçš„ä¸–ç•Œä¹¦æ–‡ä»¶\n- `roles_json/` - åˆå¹¶åçš„è§’è‰²æ•°æ®\n- `chunks/` - åˆ†å‰²çš„æ–‡æœ¬å—\n\n## ğŸ¯ è¾“å‡ºæ ¼å¼\n\n### è§’è‰²å¡æ ¼å¼\n- æ”¯æŒSillyTavern V2æ ¼å¼\n- åŒ…å«è§’è‰²åç§°ã€æè¿°ã€æ€§æ ¼ã€è¯´è¯ä¹ æƒ¯ç­‰\n- è‡ªåŠ¨ç”Ÿæˆå¤šä¸ªå¼€åœºç™½\n\n### ä¸–ç•Œä¹¦æ ¼å¼\n- æ”¯æŒSillyTavern V2ä¸–ç•Œä¹¦æ ¼å¼\n- æ™ºèƒ½åˆ†ç±»ï¼šè§’è‰²ã€åœ°ç‚¹ã€æ¦‚å¿µã€ç‰©å“ç­‰\n- ç»“æ„åŒ–æ¡ç›®ï¼Œä¾¿äºæ£€ç´¢\n\n## ğŸ” æ•…éšœæ’é™¤\n\n### å¸¸è§é—®é¢˜\n\n1. **APIè°ƒç”¨å¤±è´¥**ï¼šæ£€æŸ¥APIå¯†é’¥å’Œç½‘ç»œè¿æ¥\n2. **è§’è‰²æå–ä¸ºç©º**ï¼šæ£€æŸ¥å°è¯´æ–‡æœ¬æ ¼å¼å’Œç¼–ç \n3. **å†…å­˜ä¸è¶³**ï¼šè°ƒæ•´ `text_processing.max_chunk_chars` å‚æ•°\n4. **ç”Ÿæˆé€Ÿåº¦æ…¢**ï¼šè°ƒæ•´ `performance.max_concurrent` å‚æ•°\n\n### æ—¥å¿—æŸ¥çœ‹\n\né¡¹ç›®ä¼šåœ¨å„ä¸ªé˜¶æ®µè¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼Œå¸®åŠ©è¯Šæ–­é—®é¢˜ã€‚\n\n## ğŸ¤ è´¡çŒ®\n\næ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›é¡¹ç›®ï¼\n\n## ğŸ“„ è®¸å¯è¯\n\næœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚\n\n## ğŸ™ è‡´è°¢\n\næ„Ÿè°¢æ‰€æœ‰ä¸ºè¿™ä¸ªé¡¹ç›®åšå‡ºè´¡çŒ®çš„å¼€å‘è€…å’Œç”¨æˆ·ï¼"